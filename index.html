<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase CRUD App</title>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore.js"></script>
  <!-- Tailwind CSS (for quick styling) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Mobile-friendly adjustments */
    @media (max-width: 640px) {
      .container { padding: 0.5rem; }
      .input-group { flex-direction: column; }
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="container mx-auto p-4 max-w-3xl">
    <h1 class="text-2xl font-bold text-center mb-6">📝 Firebase CRUD</h1>
    
    <!-- ➕ ADD DATA FORM -->
    <div class="bg-white p-4 rounded-lg shadow mb-6">
      <h2 class="text-xl font-semibold mb-4">Add New Task</h2>
      <div class="input-group flex gap-2 mb-4">
        <input type="text" id="taskInput" placeholder="Enter task..." class="flex-1 p-2 border rounded">
        <button onclick="addTask()" class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600">➕ Add</button>
      </div>
    </div>

    <!-- 📜 TASK LIST (Dynamically Loaded) -->
    <div class="bg-white p-4 rounded-lg shadow">
      <h2 class="text-xl font-semibold mb-4">Your Tasks</h2>
      <div id="taskList"></div>
    </div>
  </div>

  <!-- 🔥 FIREBASE + APP LOGIC -->
  <script>
    // Initialize Firebase
    const firebaseConfig = {
  apiKey: "AIzaSyBkkXR7C-njFjV10b_zh8O07Dhv4wn6h28",
  authDomain: "database-001-d5946.firebaseapp.com",
  projectId: "database-001-d5946",
  storageBucket: "database-001-d5946.firebasestorage.app",
  messagingSenderId: "847017148004",
  appId: "1:847017148004:web:ddb19687cd91c9eabe6971",
  measurementId: "G-VBERW4W0T5"
};


    // 📌 FUNCTIONS FOR CRUD OPERATIONS
    // ➕ ADD TASK
    async function addTask() {
      const taskInput = document.getElementById("taskInput");
      if (taskInput.value.trim() === "") return;
      
      await db.collection("tasks").add({
        text: taskInput.value,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      taskInput.value = "";
    }

    // 🔄 LOAD TASKS (Real-Time Updates!)
    db.collection("tasks")
      .orderBy("createdAt", "desc")
      .onSnapshot((snapshot) => {
        const taskList = document.getElementById("taskList");
        taskList.innerHTML = "";
        
        snapshot.forEach((doc) => {
          const task = doc.data();
          const taskElement = `
            <div class="flex justify-between items-center p-3 border-b">
              <span>${task.text}</span>
              <div class="flex gap-2">
                <button onclick="deleteTask('${doc.id}')" class="text-red-500">🗑️</button>
              </div>
            </div>
          `;
          taskList.innerHTML += taskElement;
        });
      });

    // ❌ DELETE TASK
    async function deleteTask(id) {
      await db.collection("tasks").doc(id).delete();
    }
  </script>
</body>
</html>